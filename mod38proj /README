# ğŸ’³ Sistema de Escoragem de CrÃ©dito

Um sistema completo desenvolvido em Streamlit para escoragem automÃ¡tica de crÃ©dito usando modelos de machine learning.

## ğŸ¯ Funcionalidades

- **Carregamento de Modelos**: Suporte para modelos treinados em formato pickle (.pkl)
- **Upload de Dados**: Interface para upload de arquivos CSV com dados de clientes
- **DiagnÃ³stico AutomÃ¡tico**: AnÃ¡lise automÃ¡tica da estrutura do modelo e validaÃ§Ã£o dos dados
- **Escoragem em Lote**: Processamento de mÃºltiplos registros simultaneamente
- **VisualizaÃ§Ãµes Interativas**: GrÃ¡ficos e mÃ©tricas para anÃ¡lise dos resultados
- **Sistema de Rating**: ClassificaÃ§Ã£o automÃ¡tica em categorias (Excelente, Bom, Regular, Ruim, PÃ©ssimo)
- **ExportaÃ§Ã£o de Resultados**: Download dos resultados em formato CSV

## ğŸ—ï¸ Arquitetura

O sistema Ã© organizado em trÃªs telas principais:

### ğŸ“ Carregamento
- Upload do modelo de machine learning (.pkl)
- Upload dos dados para escoragem (.csv)
- DiagnÃ³stico automÃ¡tico do modelo
- ValidaÃ§Ã£o inicial dos dados

### ğŸ” DiagnÃ³stico
- AnÃ¡lise detalhada da estrutura dos dados
- VerificaÃ§Ã£o de compatibilidade com o modelo
- AnÃ¡lise de valores Ãºnicos e categorias
- IdentificaÃ§Ã£o de possÃ­veis problemas

### ğŸš€ Escoragem
- ExecuÃ§Ã£o da escoragem automÃ¡tica
- VisualizaÃ§Ã£o de resultados com grÃ¡ficos interativos
- Filtros para anÃ¡lise detalhada
- Download dos resultados

## ğŸ› ï¸ Tecnologias Utilizadas

- **Streamlit**: Framework para criaÃ§Ã£o da interface web
- **Pandas**: ManipulaÃ§Ã£o e anÃ¡lise de dados
- **NumPy**: ComputaÃ§Ã£o numÃ©rica
- **Scikit-learn**: Ferramentas de machine learning
- **Plotly Express**: VisualizaÃ§Ãµes interativas
- **Pickle**: SerializaÃ§Ã£o de modelos

## ğŸ“‹ PrÃ©-requisitos

```bash
Python 3.7+
```

### DependÃªncias
```txt
streamlit
pandas
numpy
scikit-learn
plotly
pickle5 (se Python < 3.8)
```

## ğŸš€ InstalaÃ§Ã£o

1. **Clone o repositÃ³rio**
```bash
git clone <url-do-repositorio>
cd sistema-escoragem-credito
```

2. **Instale as dependÃªncias**
```bash
pip install -r requirements.txt
```

3. **Execute a aplicaÃ§Ã£o**
```bash
streamlit run app.py
```

## ğŸ“Š Formato dos Dados

### Dados de Entrada (CSV)
O sistema espera um arquivo CSV com as seguintes colunas:

#### ObrigatÃ³rias:
- `renda`: Renda do cliente (numÃ©rico)
- `idade`: Idade do cliente (numÃ©rico)
- `tempo_emprego`: Tempo de emprego em anos (numÃ©rico)

#### Opcionais:
- `id_cliente`: Identificador Ãºnico do cliente
- `sexo`: Sexo do cliente (M/F)
- `posse_de_veiculo`: Possui veÃ­culo (S/N, True/False, 1/0)
- `posse_de_imovel`: Possui imÃ³vel (S/N, True/False, 1/0)
- `qtd_filhos`: Quantidade de filhos (numÃ©rico)
- `tipo_renda`: Tipo de renda (Assalariado, EmpresÃ¡rio, etc.)
- `educacao`: NÃ­vel de educaÃ§Ã£o (Fundamental, MÃ©dio, Superior, etc.)
- `estado_civil`: Estado civil (Solteiro, Casado, etc.)
- `tipo_residencia`: Tipo de residÃªncia (PrÃ³pria, Alugada, etc.)
- `qt_pessoas_residencia`: Quantidade de pessoas na residÃªncia (numÃ©rico)
- `data_ref`: Data de referÃªncia (formato de data)

### Modelo de Machine Learning
- Formato: Arquivo pickle (.pkl)
- Deve ser um pipeline do scikit-learn
- Deve incluir prÃ©-processadores (StandardScaler, OneHotEncoder, etc.)
- Deve ter mÃ©todo `predict()` e `predict_proba()`

## ğŸ”§ Funcionalidades TÃ©cnicas

### PrÃ©-processamento AutomÃ¡tico
- **Limpeza de dados**: RemoÃ§Ã£o de IDs, tratamento de valores nulos
- **PadronizaÃ§Ã£o**: ConversÃ£o automÃ¡tica de formatos (booleanos, datas, etc.)
- **Mapeamento**: PadronizaÃ§Ã£o de categorias (ex: SecundÃ¡rio â†’ MÃ©dio)
- **Tratamento de outliers**: Usando mÃ©todo IQR ou Z-score

### DiagnÃ³stico Inteligente
- **AnÃ¡lise do modelo**: ExtraÃ§Ã£o automÃ¡tica das colunas esperadas
- **ValidaÃ§Ã£o de tipos**: VerificaÃ§Ã£o de compatibilidade de dados
- **Mapeamento de categorias**: IdentificaÃ§Ã£o das categorias esperadas

### Sistema de Rating
- **Excelente**: 0% - 10% de probabilidade de inadimplÃªncia
- **Bom**: 10% - 30% de probabilidade de inadimplÃªncia
- **Regular**: 30% - 50% de probabilidade de inadimplÃªncia
- **Ruim**: 50% - 70% de probabilidade de inadimplÃªncia
- **PÃ©ssimo**: 70% - 100% de probabilidade de inadimplÃªncia

## ğŸ“ˆ MÃ©tricas e VisualizaÃ§Ãµes

### MÃ©tricas Principais
- Probabilidade mÃ©dia de inadimplÃªncia
- Quantidade e percentual de alto risco
- Quantidade e percentual de baixo risco
- Total de registros processados

### GrÃ¡ficos Interativos
- **Histograma**: DistribuiÃ§Ã£o das probabilidades
- **GrÃ¡fico de barras**: DistribuiÃ§Ã£o por rating
- **Filtros**: Por rating e faixa de probabilidade

## ğŸ’¾ ExportaÃ§Ã£o de Resultados

O sistema gera um arquivo CSV com as seguintes colunas adicionais:
- `score_probabilidade`: Probabilidade de inadimplÃªncia (0-1)
- `score_classe`: ClassificaÃ§Ã£o binÃ¡ria (0/1)
- `score_rating`: Rating qualitativo (Excelente/Bom/Regular/Ruim/PÃ©ssimo)

## ğŸ”’ SeguranÃ§a e Performance

### Cache Inteligente
- Cache automÃ¡tico do carregamento de modelos
- OtimizaÃ§Ã£o de performance para grandes volumes
- FunÃ§Ã£o de limpeza de cache disponÃ­vel

### Tratamento de Erros
- ValidaÃ§Ã£o robusta de dados de entrada
- Mensagens de erro informativas
- RecuperaÃ§Ã£o automÃ¡tica de falhas

## ğŸ¨ Interface do UsuÃ¡rio

### CaracterÃ­sticas
- **Design responsivo**: Adapta-se a diferentes tamanhos de tela
- **NavegaÃ§Ã£o intuitiva**: Sidebar com status em tempo real
- **Feedback visual**: Indicadores de progresso e status
- **ExperiÃªncia fluida**: TransiÃ§Ãµes suaves entre telas

### Elementos Visuais
- âœ… Indicadores de sucesso
- âŒ Alertas de erro
- âš ï¸ Avisos importantes
- ğŸ“Š MÃ©tricas destacadas
- ğŸ‰ CelebraÃ§Ãµes de conclusÃ£o

## ğŸ› SoluÃ§Ã£o de Problemas

### Problemas Comuns

1. **Erro de carregamento do modelo**
   - Verifique se o arquivo .pkl estÃ¡ no diretÃ³rio correto
   - Confirme se o modelo foi treinado com scikit-learn compatÃ­vel

2. **Dados nÃ£o reconhecidos**
   - Verifique se as colunas estÃ£o no formato correto
   - Execute o diagnÃ³stico para identificar incompatibilidades

3. **Erro durante a escoragem**
   - Verifique se hÃ¡ valores nulos em colunas obrigatÃ³rias
   - Confirme se os tipos de dados estÃ£o corretos

### Logs e Debug
O sistema inclui mensagens detalhadas de erro para facilitar o debug.

## ğŸ“ Suporte

Para questÃµes tÃ©cnicas ou bugs, verifique:
1. Se todas as dependÃªncias estÃ£o instaladas
2. Se os dados estÃ£o no formato correto
3. Se o modelo Ã© compatÃ­vel com o sistema

## ğŸ”„ VersÃµes

- **v1.0**: VersÃ£o inicial com funcionalidades bÃ¡sicas
- Carregamento de modelos e dados
- Escoragem automÃ¡tica
- Interface web completa

## ğŸ“ LicenÃ§a

Este projeto estÃ¡ sob licenÃ§a MIT. Veja o arquivo `LICENSE` para mais detalhes.

---

**Desenvolvido com â¤ï¸ usando Streamlit**